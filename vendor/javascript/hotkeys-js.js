// hotkeys-js@3.13.13 downloaded from https://ga.jspm.io/npm:hotkeys-js@3.13.13/dist/hotkeys.esm.js

const e=typeof navigator!=="undefined"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function t(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function n(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on".concat(t),n)}function o(e,t){const n=t.slice(0,t.length-1);for(let t=0;t<n.length;t++)n[t]=e[n[t].toLowerCase()];return n}function s(e){typeof e!=="string"&&(e="");e=e.replace(/\s/g,"");const t=e.split(",");let n=t.lastIndexOf("");for(;n>=0;){t[n-1]+=",";t.splice(n,1);n=t.lastIndexOf("")}return t}function r(e,t){const n=e.length>=t.length?e:t;const o=e.length>=t.length?t:e;let s=true;for(let e=0;e<n.length;e++)o.indexOf(n[e])===-1&&(s=false);return s}const c={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220};const l={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,meta:91,command:91};const i={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91};const f={16:false,18:false,17:false,91:false};const a={};for(let e=1;e<20;e++)c["f".concat(e)]=111+e;let u=[];let p=null;let y="all";const d=new Map;const h=e=>c[e.toLowerCase()]||l[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);const k=e=>Object.keys(c).find((t=>c[t]===e));const m=e=>Object.keys(l).find((t=>l[t]===e));function g(e){y=e||"all"}function w(){return y||"all"}function O(){return u.slice(0)}function b(){return u.map((e=>k(e)||m(e)||String.fromCharCode(e)))}function E(){const e=[];Object.keys(a).forEach((t=>{a[t].forEach((t=>{let{key:n,scope:o,mods:s,shortcut:r}=t;e.push({scope:o,shortcut:r,mods:s,keys:n.split("+").map((e=>h(e)))})}))}));return e}function v(e){const t=e.target||e.srcElement;const{tagName:n}=t;let o=true;const s=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);(t.isContentEditable||(s||n==="TEXTAREA"||n==="SELECT")&&!t.readOnly)&&(o=false);return o}function K(e){typeof e==="string"&&(e=h(e));return u.indexOf(e)!==-1}function j(e,t){let n;let o;e||(e=w());for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t)){n=a[t];for(o=0;o<n.length;)if(n[o].scope===e){const e=n.splice(o,1);e.forEach((e=>{let{element:t}=e;return M(t)}))}else o++}w()===e&&g(t||"all")}function C(e){let t=e.keyCode||e.which||e.charCode;e.key&&e.key.toLowerCase()==="capslock"&&(t=h(e.key));const n=u.indexOf(t);n>=0&&u.splice(n,1);e.key&&e.key.toLowerCase()==="meta"&&u.splice(0,u.length);t!==93&&t!==224||(t=91);if(t in f){f[t]=false;for(const e in l)l[e]===t&&(P[e]=false)}}function x(e){if(typeof e==="undefined"){Object.keys(a).forEach((e=>{Array.isArray(a[e])&&a[e].forEach((e=>L(e)));delete a[e]}));M(null)}else if(Array.isArray(e))e.forEach((e=>{e.key&&L(e)}));else if(typeof e==="object")e.key&&L(e);else if(typeof e==="string"){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let[s,r]=n;if(typeof s==="function"){r=s;s=""}L({key:e,scope:s,method:r,splitKey:"+"})}}const L=e=>{let{key:t,scope:n,method:c,splitKey:i="+"}=e;const f=s(t);f.forEach((e=>{const t=e.split(i);const s=t.length;const f=t[s-1];const u=f==="*"?"*":h(f);if(!a[u])return;n||(n=w());const p=s>1?o(l,t):[];const y=[];a[u]=a[u].filter((e=>{const t=!c||e.method===c;const o=t&&e.scope===n&&r(e.mods,p);o&&y.push(e.element);return!o}));y.forEach((e=>M(e)))}))};function _(e,t,n,o){if(t.element!==o)return;let s;if(t.scope===n||t.scope==="all"){s=t.mods.length>0;for(const e in f)Object.prototype.hasOwnProperty.call(f,e)&&(!f[e]&&t.mods.indexOf(+e)>-1||f[e]&&t.mods.indexOf(+e)===-1)&&(s=false);if(t.mods.length===0&&!f[16]&&!f[18]&&!f[17]&&!f[91]||s||t.shortcut==="*"){t.keys=[];t.keys=t.keys.concat(u);if(t.method(e,t)===false){e.preventDefault?e.preventDefault():e.returnValue=false;e.stopPropagation&&e.stopPropagation();e.cancelBubble&&(e.cancelBubble=true)}}}}function A(e,t){const n=a["*"];let o=e.keyCode||e.which||e.charCode;if(e.key&&e.key.toLowerCase()==="capslock")return;console.log("hotkeys.js: ",e.key,e);if(!P.filter.call(this,e))return;o!==93&&o!==224||(o=91);u.indexOf(o)===-1&&o!==229&&u.push(o);["metaKey","ctrlKey","altKey","shiftKey"].forEach((t=>{const n=i[t];e[t]&&u.indexOf(n)===-1?u.push(n):!e[t]&&u.indexOf(n)>-1?u.splice(u.indexOf(n),1):t==="metaKey"&&e[t]&&(u=u.filter((e=>e in i||e===o)))}));if(o in f){f[o]=true;for(const t in l)if(Object.prototype.hasOwnProperty.call(l,t)){const n=i[l[t]];P[t]=e[n]}if(!n)return}for(const t in f)Object.prototype.hasOwnProperty.call(f,t)&&(f[t]=e[i[t]]);if(e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")){u.indexOf(17)===-1&&u.push(17);u.indexOf(18)===-1&&u.push(18);f[17]=true;f[18]=true}const s=w();if(n)for(let o=0;o<n.length;o++)n[o].scope===s&&(e.type==="keydown"&&n[o].keydown||e.type==="keyup"&&n[o].keyup)&&_(e,n[o],s,t);if(!(o in a))return;const r=a[o];const c=r.length;for(let n=0;n<c;n++)if((e.type==="keydown"&&r[n].keydown||e.type==="keyup"&&r[n].keyup)&&r[n].key){const o=r[n];const{splitKey:c}=o;const l=o.key.split(c);const i=[];for(let e=0;e<l.length;e++)i.push(h(l[e]));i.sort().join("")===u.sort().join("")&&_(e,o,s,t)}}function P(e,n,r){u=[];const c=s(e);let i=[];let f="all";let y=document;let k=0;let m=false;let g=true;let w="+";let O=false;let b=false;r===void 0&&typeof n==="function"&&(r=n);if(Object.prototype.toString.call(n)==="[object Object]"){n.scope&&(f=n.scope);n.element&&(y=n.element);n.keyup&&(m=n.keyup);n.keydown!==void 0&&(g=n.keydown);n.capture!==void 0&&(O=n.capture);typeof n.splitKey==="string"&&(w=n.splitKey);n.single===true&&(b=true)}typeof n==="string"&&(f=n);b&&x(e,f);for(;k<c.length;k++){e=c[k].split(w);i=[];e.length>1&&(i=o(l,e));e=e[e.length-1];e=e==="*"?"*":h(e);e in a||(a[e]=[]);a[e].push({keyup:m,keydown:g,scope:f,mods:i,shortcut:c[k],method:r,key:c[k],splitKey:w,element:y})}if(typeof y!=="undefined"&&window){if(!d.has(y)){const e=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return A(e,y)};const n=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;A(e,y);C(e)};d.set(y,{keydownListener:e,keyupListenr:n,capture:O});t(y,"keydown",e,O);t(y,"keyup",n,O)}if(!p){const e=()=>{u=[]};p={listener:e,capture:O};t(window,"focus",e,O)}}}function S(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(a).forEach((n=>{const o=a[n].filter((n=>n.scope===t&&n.shortcut===e));o.forEach((e=>{e&&e.method&&e.method()}))}))}function M(e){const t=Object.values(a).flat();const o=t.findIndex((t=>{let{element:n}=t;return n===e}));if(o<0){const{keydownListener:t,keyupListenr:o,capture:s}=d.get(e)||{};if(t&&o){n(e,"keyup",o,s);n(e,"keydown",t,s);d.delete(e)}}if(t.length<=0||d.size<=0){const e=Object.keys(d);e.forEach((e=>{const{keydownListener:t,keyupListenr:o,capture:s}=d.get(e)||{};if(t&&o){n(e,"keyup",o,s);n(e,"keydown",t,s);d.delete(e)}}));d.clear();Object.keys(a).forEach((e=>delete a[e]));if(p){const{listener:e,capture:t}=p;n(window,"focus",e,t);p=null}}}const I={getPressedKeyString:b,setScope:g,getScope:w,deleteScope:j,getPressedKeyCodes:O,getAllKeyCodes:E,isPressed:K,filter:v,trigger:S,unbind:x,keyMap:c,modifier:l,modifierMap:i};for(const e in I)Object.prototype.hasOwnProperty.call(I,e)&&(P[e]=I[e]);if(typeof window!=="undefined"){const e=window.hotkeys;P.noConflict=t=>{t&&window.hotkeys===P&&(window.hotkeys=e);return P};window.hotkeys=P}export{P as default};

